<!DOCTYPE html>
<html>
<head>
    <title>NickBox - Simple Python Multiboxer</title>
    <link rel="icon" type="image/x-icon" href="media/favicon.ico">
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        header {
            background-color: #f0f0f0;
            padding: 10px;
            text-align: center;
        }
        nav {
            background-color: #e0e0e0;
            padding: 10px;
            text-align: center;
        }
        nav a {
            margin: 0 15px;
            text-decoration: none;
            color: #333;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .main-content {
            display: flex;
            flex: 1;
            overflow: auto;
        }
        .sidebar {
            width: 200px;
            background-color: #f8f8f8;
            padding: 20px;
            box-sizing: border-box;
        }
        .content {
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .img-logo {
            max-width: 200px;
        }
        .demo-image {
            max-width: 100%;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
        .video-container {
            margin-bottom: 20px;
        }
        .code-modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        .code-modal-content {
            background-color: #f8f8f8;
            margin: 5% auto;
            padding: 20px;
            width: 80%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: black;
        }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .faq-item {
            margin-bottom: 20px;
        }
        .faq-question {
            font-weight: bold;
            cursor: pointer;
            color: #2c3e50;
        }
        .faq-answer {
            margin-top: 10px;
            margin-left: 20px;
        }
        ul {
            padding-left: 20px;
        }
        ul li {
            margin-bottom: 10px;
        }
	.video-container {
	    display: flex;
	    flex-wrap: wrap;
	    gap: 20px;
	    background-color: #f0f0f0; /* Unifying background color */
	    padding: 20px;
	    border-radius: 8px;
	}
	
	.video-item {
	    flex: 1 1 calc(50% - 20px); /* Adjust width to fit two videos per row */
	    box-sizing: border-box;
	}
	
	.video-item video {
	    width: 100%;
	    border: 1px solid #ddd;
	}
    </style>
</head>
<body>
<header>
    <img src="https://github.com/user-attachments/assets/5ffecc35-27b9-45e4-8aca-dff1ba751f30" alt="NickBox Logo" class="img-logo">
</header>
<nav>
    <a href="#" onclick="loadHomePage()">Home</a>
    <a href="#" onclick="loadDemos()">Demos</a>
    <a href="#" onclick="loadDownloads()">Downloads</a>
    <a href="#" onclick="loadFAQ()">FAQ</a>
    <a href="#" onclick="loadLicense()">License</a>
</nav>
<div class="main-content">
    <div class="sidebar" id="sidebar">
        <!-- Will be populated dynamically -->
    </div>
    <div class="content" id="mainContent">
        <!-- Content will be loaded dynamically -->
        <div id="loadingIndicator">Loading content...</div>
    </div>
</div>

<!-- Code Modal for viewing source code -->
<div id="codeModal" class="code-modal">
    <div class="code-modal-content">
        <span class="close" onclick="closeCodeModal()">&times;</span>
        <h2 id="codeModalTitle">Source Code</h2>
        <pre id="codeModalContent">Loading code...</pre>
    </div>
</div>

<script>
    // Repository information
    const repoOwner = 'mostlynick3';
    const repoName = 'NickBox';
    const webBranch = 'web';  // Everything now references web branch
    
    // Function to fetch and parse content from web branch
	async function fetchContent(path) {
	    try {
	        const response = await fetch(path);
	        if (!response.ok) throw new Error('Network response was not ok');
	
	        const content = await response.text();
	        return content;
	    } catch (error) {
	        console.error(`Error fetching ${path}:`, error);
	        return `Failed to load ${path}. Error: ${error.message}`;
	    }
	}
    
	// Enhanced markdown parser
	function parseMarkdown(markdown) {
	    // Remove any img HTML tags before processing
	    markdown = markdown.replace(/<img[^>]*>/g, '');
	    
	    let html = markdown
	        // Headers
	        .replace(/^### (.*$)/gim, '<h3>$1</h3>')
	        .replace(/^## (.*$)/gim, '<h2>$1</h2>')
	        .replace(/^# (.*$)/gim, '<h1>$1</h1>')
	        // Bold
	        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
	        // Italic
	        .replace(/\*(.*?)\*/g, '<em>$1</em>')
	        // Bullet lists
	        .replace(/^\* (.*$)/gim, '<li>$1</li>')
	        // Links
	        .replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>');
	    
	    // Wrap list items in ul tags
	    html = html.replace(/<li>.*?<\/li>/gs, match => {
	        return `<ul>${match}</ul>`;
	    });
	    
	    // Convert line breaks to paragraphs (excluding lists and headers)
	    const paragraphs = html.split(/\n\s*\n/);
	    html = paragraphs.map(p => {
	        if (!p.trim().startsWith('<')) {
	            return `<p>${p.trim()}</p>`;
	        }
	        return p;
	    }).join('\n');
	    
	    return html;
	}
    
    // Load homepage (README.md content from web branch)
    async function loadHomePage() {
        document.getElementById('mainContent').innerHTML = '<div id="loadingIndicator">Loading content...</div>';
        
        try {
            const readmeContent = await fetchContent('README.md');
            let parsedContent = parseMarkdown(readmeContent);
            
            // Update main content
            document.getElementById('mainContent').innerHTML = parsedContent;
            
            // Extract sections for sidebar
            updateSidebar(readmeContent);
        } catch (error) {
            document.getElementById('mainContent').innerHTML = `<p>Error loading content: ${error.message}</p>`;
        }
    }
    
    // Update sidebar based on README headers
    function updateSidebar(markdown) {
        const matches = markdown.match(/^##\s+(.*)$/gm);
        
        if (matches) {
            const sidebarContent = matches.map(match => {
                const header = match.replace(/^##\s+/, '').trim();
                return `<h2><a href="#" onclick="scrollToSection('${header}')">${header}</a></h2>`;
            }).join('');
            
            document.getElementById('sidebar').innerHTML = sidebarContent;
        } else {
            document.getElementById('sidebar').innerHTML = '<h2>Home</h2>';
        }
    }
    
    // Scroll to section
    function scrollToSection(sectionTitle) {
        const elements = document.querySelectorAll('h2');
        for (const element of elements) {
            if (element.textContent === sectionTitle) {
                element.scrollIntoView({ behavior: 'smooth' });
                return;
            }
        }
    }
    
	function loadDownloads() {
	  const releasesUrl = `https://github.com/${repoOwner}/${repoName}/releases`;
	
	  document.getElementById('mainContent').innerHTML = `
	    <p>You can find the latest releases on the GitHub releases page:</p>
	    <a href="${releasesUrl}" target="_blank">GitHub Releases</a>
	  `;
	
	  document.getElementById('sidebar').innerHTML = '<h2>Downloads</h2>';
	}
    
    // Load license content directly in the main content area
    async function loadLicense() {
        document.getElementById('mainContent').innerHTML = '<div id="loadingIndicator">Loading license...</div>';
        
        try {
            const licenseContent = await fetchContent('LICENSE');
            document.getElementById('mainContent').innerHTML = `<pre>${licenseContent}</pre>`;
            document.getElementById('sidebar').innerHTML = '<h2>License</h2>';
        } catch (error) {
            document.getElementById('mainContent').innerHTML = `<p>Failed to load license. Error: ${error.message}</p>`;
        }
    }
    
    // Load FAQ content
    function loadFAQ() {
        const faqContent = `
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">Is this project open source? If so, can I download the source code and make my own edits to it, or report issues/feature request on GitHub for further development?</div>
                <div class="faq-answer">
                    <p>Yes, yes, and yes. Open source development offers enhanced security through code transparency. When software is open source, anyone can inspect the code, making it more difficult for malicious features to be hidden. This collaborative approach often leads to better quality software as bugs are found and fixed by the community.</p>
                </div>
            </div>
	    
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">How can I see the source code?</div>
                <div class="faq-answer">
                    <p>By going to NickBox.py in the main branch, or clicking <a href="https://github.com/mostlynick3/NickBox/blob/main/NickBox.py" target="_blank">here</a> to view the main source code in a new tab.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">How can I compile this myself?</div>
                <div class="faq-answer">
                    <p>You can use any pyinstaller implementation. This project is compiled to .exe using pyinstaller with UPX compression, an icon and the following tags:</p>
                    <pre>--clean --onefile --exclude-module=cv2 --exclude-module=numpy --exclude-module=PIL --exclude=libcrypto-3.dll --name="NickBox" --noconsole NickBox.py</pre>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">Why should I use this project instead of ISBoxer, WoW Open Box or OpenMultiboxing?</div>
                <div class="faq-answer">
                    <p>Like WoW Open Box and OpenMultiboxing, NickBox is free. ISBoxer is not. The project is entirely contained in one single .py file and has no hidden code or external communication built into it, as opposed to ISBoxer and other private code bases. NickBox lacks some features of WoW Open Box and forks like OpenMultiboxing, but in turn NickBox supports both auto mouse focus and keyboard broadcasting simultaneously. While advanced users may miss some features, NickBox is designed to be quick, easy, plug-and-play, and non-disruptive once you have set up your windows and started broadcasting.</p>
                </div>
            </div>
	    
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">What does the 'Hide Taskbar' feature do?</div>
                <div class="faq-answer">
                    <p>The 'Hide Taskbar' feature allows you to hide the Windows taskbar only when you are focusing the windows you intend to broadcast to, letting you expand the size of your windows to your full screen size.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">How does the grid snapping work?</div>
                <div class="faq-answer">
                    <p>Grid snapping is enabled by defaul with a default snap size of 50 pixels. When enabled, windows will snap to an invisible grid when being repositioned, making it easier to align multiple windows precisely.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">How does auto-focusing work?</div>
                <div class="faq-answer">
                    <p>The auto-focusing feature automatically focuses and places the selected windows on top of other content, if parts of them are hovered over. This does not override normal window behavior, and is not active in other windows than the target windows.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">What happens during an Alt+Tab?</div>
                <div class="faq-answer">
                    <p>If auto focus is enabled, Alt+Tab's overlay will compete with the selected windows' auto focus. NickBox can detect Alt+Tab keystrokes and temporarily pause broadcasting during this to allow you to switch between windows without causing unintended behaviors in your target applications.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleAnswer(this)">Can I save different window configurations?</div>
                <div class="faq-answer">
                    <p>Yes, NickBox supports profiles that save your window configurations and key mappings. The profiles are stored in the "settings" directory (profiles_dir) with the current profile name stored in current_profile. Window positions, sizes, and other settings are automatically saved to the selected profile.</p>
                </div>
            </div>
        `;
        
        document.getElementById('mainContent').innerHTML = faqContent;
        document.getElementById('sidebar').innerHTML = '<h2>FAQ</h2>';
    }
    

	function loadDemos() {
	    document.getElementById('mainContent').innerHTML = '<div id="loadingIndicator">Loading demo videos...</div>';
	
	    // Base path for demos directory
	    const demosPath = 'media/demos/';
	
	    let demosContent = '<h2>Demo Videos</h2>';
	
	    // Videos section
	    demosContent += '<div class="video-container">';
	
	    const videoNames = ['demo-scaling', 'demo-startup'];
	    const videoExtensions = ['.mp4'];
	
	    videoNames.forEach(videoName => {
	        const formattedName = videoName
	            .replace(/-|_/g, ' ')
	            .replace(/\b\w/g, l => l.toUpperCase());
	
	        demosContent += `
	        <div class="video-item">
	            <h3>${formattedName}</h3>
	            <video controls>`;
	
	        // Try different formats, browser will use the first one that works
	        videoExtensions.forEach(ext => {
	            demosContent += `<source src="${demosPath}${videoName}${ext}" type="video/${ext.substring(1)}">`;
	        });
	
	        demosContent += `
	                Your browser does not support these video formats.
	            </video>
	        </div>`;
	    });
	
	    demosContent += '</div>';
	
	    demosContent += `
	    <div class="images-section">
	        <h2>Screenshot Examples</h2>
	        <div class="image-container">
	            <h3>World of Warcraft Multiboxing Example</h3>
	            <img src="https://github.com/user-attachments/assets/f1b6c891-7a65-4ecd-b383-0986be51acf2" alt="WoW Multiboxing" class="demo-image">
	        </div>
	    </div>`;
	
	    document.getElementById('mainContent').innerHTML = demosContent;
	    document.getElementById('sidebar').innerHTML = '<h2>Demos</h2>';
	}

    
    // View source code in modal
    async function viewSourceCode(filename) {
        document.getElementById('codeModalTitle').textContent = filename;
        document.getElementById('codeModalContent').textContent = 'Loading source code...';
        document.getElementById('codeModal').style.display = 'block';
        
        try {
            const sourceCode = await fetchContent(filename);
            document.getElementById('codeModalContent').textContent = sourceCode;
        } catch (error) {
            document.getElementById('codeModalContent').textContent = `Failed to load source code: ${error.message}`;
        }
    }
    
    // Close code modal
    function closeCodeModal() {
        document.getElementById('codeModal').style.display = 'none';
    }
    
    // Toggle FAQ answer visibility
    function toggleAnswer(element) {
        const answer = element.nextElementSibling;
        answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
    }
    
    // Close modal when clicking outside of it
    window.onclick = function(event) {
        const modal = document.getElementById('codeModal');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
    
    // Initialize all FAQ answers to be visible
    document.addEventListener('DOMContentLoaded', function() {
        const answers = document.querySelectorAll('.faq-answer');
        answers.forEach(answer => {
            answer.style.display = 'block';
        });
        
        // Load home page
        loadHomePage();
    });
</script>
</body>
</html>
